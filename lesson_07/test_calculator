import unittest
from selenium import webdriver
from webdriver_manager.chrome import ChromeDriverManager
from 07_lesson.calculator_page import CalculatorPage

class CalculatorTest(unittest.TestCase):

    def setUp(self):
        self.driver = webdriver.Chrome(ChromeDriverManager().install())
        self.driver.get("https://bonigarcia.dev/selenium-webdriver-java/slow-calculator.html")
        self.calculator_page = CalculatorPage(self.driver)

    def tearDown(self):
        self.driver.quit()

    def test_slow_calculator(self):
        delay_value = "45"
        expected_result = "15"

        self.calculator_page.perform_calculation(delay_value)
        self.calculator_page.wait_for_result(expected_result, int(delay_value) + 5) # Добавляем немного времени на всякий случай

        actual_result = self.calculator_page.get_result()
        self.assertEqual(actual_result, expected_result, f"Expected '{expected_result}', but got '{actual_result}'")

if __name__ == "__main__":
    unittest.main()
